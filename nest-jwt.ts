import { sign, decode, verify } from "jsonwebtoken";

const secret = "some_secret";
const wrapped = sign(
  {
    storeid: 59,
    nested:
      "eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6IklKdjlCalM0dXpocWlBVzZ1T1l5bV9ScFk4USIsImtpZCI6IjIwOUJGRDA2MzRCOEJCMzg2QTg4MDVCQUI4RTYzMjlCRjQ2OTYzQzQifQ.eyJ3Zm1fYXV0aF9sZWdhY3lUb2tlbiI6IjdrbkhEWElucnY1SGtKaFc5b2hhN0VKQWFKUkR0MXZDQzVJeEUxRkNpM1VKZmhmeHRVWXlyc3BxaXJ3Q2FhWFgiLCJ3Zm1fcGFzc3dvcmRMYXN0U2V0IjoiNC8yNi8yMDE3IDY6MjM6MzMgUE0gKzAwOjAwIiwid2ZtX2xveWFsdHlfa2V5dGFnIjoiMTAwMzUwNDUwMyIsIndmbV9zaG9wcGVyc0NsdWJOdW1iZXIiOiIzNTA0NSIsIndmbV9wcm9maWxlX2N1aWQiOiI0ZDM1OTYxMS0wYzk5LTQwZGItYWYxMS02YjcyNzZiODc0OTYiLCJqdGkiOiIyOGJmY2IyNi1hZGQ0LTQyYmItYWY5ZS1jMmM2MmVmOTg2NjciLCJ1c2FnZSI6ImFjY2Vzc190b2tlbiIsImNvbmZpZGVudGlhbCI6dHJ1ZSwic2NvcGUiOlsib3BlbmlkIiwib2ZmbGluZV9hY2Nlc3MiXSwic3ViIjoiTUFSWS5NQUhPTkVZMTNAR01BSUwuQ09NIiwiYXVkIjoid2VnbWFucy5jb20iLCJhenAiOiJhZW0iLCJpc3MiOiJodHRwczovL2lkcC5hcGkud2VnbWFucy5jb20vIiwiZXhwIjoxNTc1NDA1MDMyLCJuYmYiOjE1NzUzNzU5MzIsImlhdCI6MTU3NTM3NTkzMn0.a0x5h9JpZ5OQ_mde5JHFKoFvL2tGXbHSZUw2unDiptXzOm9m-FOt8tunW-GX6ac8ehlvJdAlE_FCxw1OoFwTN9kU1aZ0vbhUaH6fbHeWLtfOBjAWwI7G_7wutjpaJJhvtm5rCQNISQqTDNcBAmh2H748F3vWegZe_FL86mnchzSLopO1aI5oVXyPLLjPMSSD27vazxBaa1Ref565-TGM75IPB8pCnNeTrMYaxVH2agm7p3cakBL0qluJt4tyJEgvQMO-_YltSpe7IAeixLoN8JUDErPyfEcw5t2AGqEhUZBUJMvlpiTp0xa3ijZVQs87dXCpjv1Y9ox6adXbiWLX8A"
  },
  secret
);

console.log(((verify(wrapped, secret) as unknown) as any).nested);
